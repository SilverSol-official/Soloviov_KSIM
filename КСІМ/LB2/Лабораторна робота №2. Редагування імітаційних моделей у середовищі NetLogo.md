

**Варіант:** Модифікація моделі **Virus Basic** (SIR-модель, агенти: **turtles**).

## Опис Внесених Змін до Вихідної Логіки Моделі

### 1. Зміни згідно з Варіантом (Обов'язкові)

#### А. Вплив Віку на Інфікування та Результат Захворювання
Реалізовано диференційований вплив віку (`age`) агента на його вразливість. Модифікатори додаються до базових параметрів `infectiousness` та `chance-recover` в залежності від того, чи є агент молодим (до 20% життя) чи літнім (понад 75% життя).

* **Літні агенти ($\text{age} > 75\%\text{ lifespan}$):** +10 до шансу інфікування, -10 до шансу одужання.
* **Молоді агенти ($\text{age} < 20\%\text{ lifespan}$):** -5 до шансу інфікування, +5 до шансу одужання.

#### Б. Вплив Поширення Хвороби на Народжуваність
Впроваджено механізм, де високий рівень поширення вірусу (`%infected`) негативно впливає на народжуваність, моделюючи соціальну чи біологічну реакцію популяції на кризу.

* **Реалізація:** Шанс розмноження (`chance-reproduce`) зменшується на $\frac{\%\text{infected}}{2}$ у кожному такті.

#### В. Регулювання Імунітету та Повторного Зараження
Введено нові параметри для гнучкого налаштування епідемічного циклу $\text{S} \to \text{I} \to \text{R} \to \text{S}$:
* **`immunity-duration`:** Керує, як довго агент залишається імунним.
* **`ever-sick?`:** Змінна агента, яка фіксує попереднє захворювання.
* **`reinfect-multiplier`:** Слайдер (0-100), який визначає, наскільки **знижується** сприйнятливість до повторного зараження для агента, що вже перехворів.

### 2. Зміни у Моніторингу (Для Звіту)
Додано монітори для збору ключових показників епідемії:
* **`max-infected-count`** (Кількість агентів на піку).
* **`cumulative-recovered-total`** (Загальна кількість агентів, що перехворіла за весь час).

---

## Обчислювальний Експеримент

### 1. Вплив Сприйнятливості до Повторного Зараження на Масштаб Епідемії

**Мета:** Дослідження залежності **Максимального Піку Інфікованих** (`max-infected-count`) та **Загальної Кількість Одужалих** (`cumulative-recovered-total`) від **Множника Сприйнятливості до Повторного Зараження** (`reinfect-multiplier`).

**Фіксовані Параметри:** `infectiousness`: 50%, `chance-recover`: 70%, `duration`: 10 тижнів, `immunity-duration`: 52 тижні.

| reinfect-multiplier (%) | Середнє Max Infected (Пік) | Середнє Cumulative Recovered (Загалом) |
| :---: | :---: | :---: |
| **0** | **25** | **47** |
| **25** | **34** | **53** |
| **50** | **32** | **74** |
| **75** | **28** | **42** |
| **100** | **36** | **60** |



**Висновки:**

1.  **Вплив на Пік Інфекції (`Max Infected`):** Хоча **максимальний пік (36)** досягається при **$100\%$** (відсутність додаткового захисту від повторного зараження), загальна залежність виявилася нестабільною. Це свідчить про те, що перша хвиля епідемії менш чутлива до можливості повторного зараження, ніж до основних параметрів ($\text{R}_0$).
2.  **Вплив на Сумарний Розмір Епідемії (`Cumulative Recovered`):** Найбільша сумарна кількість перехворілих (**74**) досягається при **помірному значенні $50\%$**. При $100\%$ (найвища сприйнятливість) цей показник падає до 60. Це може пояснюватися тим, що високий рівень повторного зараження у поєднанні з віковою смертністю може швидше виснажувати пул вразливих агентів, які помирають, не встигаючи завершити повний цикл хвороби, тоді як помірна сприйнятливість забезпечує стабільні, але численні хвилі інфекції.

---

**Фіналізація:** Фінальний код моделі та її інтерфейс: 
`turtles-own  
  [ sick?                ;; if true, the turtle is infectious  
    remaining-immunity   ;; how many weeks of immunity the turtle has left  
    sick-time            ;; how long, in weeks, the turtle has been infectious  
    age                  ;; how many weeks old the turtle is  
    ever-sick? ]         ;; НОВА: чи був агент хворий раніше (потрібно для повторного інфікування)  
  
globals  
  [ %infected            ;; what % of the population is infectious  
    %immune              ;; what % of the population is immune  
    lifespan             ;; the lifespan of a turtle  
    chance-reproduce     ;; the probability of a turtle generating an offspring each tick  
    carrying-capacity    ;; the number of turtles that can be in the world at one time  
      
    max-infected-count   ;; Найвище значення інфікованих  
    final-recovered-count ; Кінцеве значення одужалих  
    epidemic-over?        ; Чи закінчилася епідемія  
    cumulative-recovered-total ; Загальна кількість, що перехворіла  
    duration-of-epidemy;  ;; Тривалість епідемії до піку  
    tick-count];;         ;; Кількість пройдених тиків  
        
  
;; The setup is divided into four procedures  
to setup  
  clear-all  
  set max-infected-count 0   
  set final-recovered-count 0   
  set epidemic-over? false     
  set cumulative-recovered-total 0  
  set tick-count 0  
  set duration-of-epidemy 0  
  setup-constants  
  setup-turtles  
  update-global-variables  
  update-display  
  reset-ticks  
end  
  
;; We create a variable number of turtles of which 10 are infectious,  
;; and distribute them randomly  
to setup-turtles  
  create-turtles number-people  
    [ setxy random-xcor random-ycor  
      set age random lifespan  
      set sick-time 0  
      set remaining-immunity 0  
      set size 1.5  ;; easier to see  
      set ever-sick? false ;; Ініціалізація нової змінної  
      get-healthy ]  
  ask n-of 10 turtles  
    [ get-sick ]  
end  
  
to get-sick ;; turtle procedure  
  set sick? true  
  set remaining-immunity 0  
  set ever-sick? true ;; Фіксуємо, що агент був хворий  
end  
  
to get-healthy ;; turtle procedure  
  set sick? false  
  set remaining-immunity 0  
  set sick-time 0  
end  
  
to become-immune ;; turtle procedure  
  set sick? false  
  set sick-time 0  
  set remaining-immunity immunity-duration  
  set cumulative-recovered-total cumulative-recovered-total + 1 ;; Оновлюємо загальну кількість  
end  
  
to setup-constants  
  set lifespan 50 * 52        
  set carrying-capacity 300  
  set chance-reproduce 1  
    
  set immunity-duration 52   
  set reinfect-multiplier 50   
    
end  
  
to go  
  ask turtles [  
    get-older  
    move  
    if sick? [ recover-or-die ]  
    ifelse sick? [ infect ] [ reproduce ]  
  ]  
    
  set tick-count tick-count + 1   
  
  let current-infected count turtles with [sick?]  
    
  ;; Збір показників епідемії  
  if current-infected > max-infected-count [  
    set max-infected-count current-infected   
    set duration-of-epidemy tick-count   
  ]  
    
  let current-recovered count turtles with [ immune? ]   
    
  ;; Фіксація кінця епідемії  
  if (current-infected = 0) and (not epidemic-over?) [  
    set final-recovered-count current-recovered   
    set epidemic-over? true                       
  ]  
    
  update-global-variables  
  update-display  
  tick  
end  
  
to update-global-variables  
  if count turtles > 0  
    [ set %infected (count turtles with [ sick? ] / count turtles) * 100  
      set %immune (count turtles with [ immune? ] / count turtles) * 100 ]  
end  
  
to update-display  
  ask turtles  
    [ if shape != turtle-shape [ set shape turtle-shape ]  
      set color ifelse-value sick? [ red ] [ ifelse-value immune? [ grey ] [ green ] ] ]  
end  
  
;;Turtle counting variables are advanced.  
to get-older ;; turtle procedure  
  set age age + 1  
  if age > lifespan [ die ]  
  if immune? [ set remaining-immunity remaining-immunity - 1 ]  
  if sick? [ set sick-time sick-time + 1 ]  
end  
  
;; Turtles move about at random.  
to move ;; turtle procedure  
  let step-size 1 ;; Базовий крок  
    
  rt random 100  
  lt random 100  
  fd step-size  
end  
  
;; If a turtle is sick, it infects other turtles on the same patch.  
;; Immune turtles don't get sick.  
to infect ;; turtle procedure  
  let age-modifier 0  
    
  ;; ЗАВДАННЯ 1: Вплив віку на інфікування  
  if age > (lifespan * 0.75) [ set age-modifier 10 ]   
  if age < (lifespan * 0.2) [ set age-modifier -5 ]     
    
  let effective-infectiousness infectiousness + age-modifier   
  
  ;; Інфікувати тих, хто є "Сприйнятливим"  
  ask other turtles-here with [ not sick? and not immune? ]  
    [ let final-infection-chance effective-infectiousness  
        
      ;; ЗАВДАННЯ 3: Вірогідність захворіти повторно  
      if ever-sick? [  
        ;; Вірогідність зараження множиться на reinfect-multiplier  
        set final-infection-chance final-infection-chance * (reinfect-multiplier / 100)   
      ]  
        
      if random-float 100 < final-infection-chance  
        [ get-sick ]  
    ]  
end  
  
;; Once the turtle has been sick long enough, it  
;; either recovers (and becomes immune) or it dies.  
to recover-or-die ;; turtle procedure  
  if sick-time > duration                          
    [ let age-factor 0  
        
      ;; ЗАВДАННЯ 1: Вплив віку на результат захворювання  
      if age > (lifespan * 0.75) [ set age-factor -10 ]  
      if age < (lifespan * 0.2) [ set age-factor 5 ]  
        
      let final-recover-chance chance-recover + age-factor  
        
      ifelse random-float 100 < final-recover-chance     
        [ become-immune ]  
        [ die ] ]  
end  
  
;; If there are less turtles than the carrying-capacity  
;; then turtles can reproduce.  
to reproduce   
  let spread-reduction %infected / 2   
  let final-reproduce-chance chance-reproduce - spread-reduction  
    
  if final-reproduce-chance < 0 [ set final-reproduce-chance 0 ]  
    
  if count turtles < carrying-capacity and random-float 100 < final-reproduce-chance  
    [ hatch 1  
      [ set age 1  
        lt 45 fd 1  
        get-healthy ] ]  
end  
  
to-report immune?  
  report remaining-immunity > 0  
end  
  
to startup  
  setup-constants   
end`

![[Pasted image 20251129215142.png]]